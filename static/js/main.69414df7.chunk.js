(this["webpackJsonpadmin-app"]=this["webpackJsonpadmin-app"]||[]).push([[0],{108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){},112:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),l=a.n(c),o=(a(82),a(11)),u=(a(83),a(123)),s=a(124),i=a(117),m=a(13),p=a(9),d=a(8),E=a.n(d),f=a(3),b=a(10),g="LOGIN_REQUEST",v="LOGIN_FAILURE",y="LOGIN_SUCCESS",h="LOGOUT_REQUEST",O="LOGOUT_SUCCESS",j="LOGOUT_FAILURE",S="USER_REGISTER_REQUEST",C="USER_REGISTER_SUCCESS",k="USER_REGISTER_FAILURE",_="GET_ALL_CATEGORIES_REQUEST",T="GET_ALL_CATEGORIES_SUCCESS",N="GET_ALL_CATEGORIES_FAILURE",R="ADD_NEW_CATEGORY_REQUEST",x="ADD_NEW_CATEGORY_SUCCESS",w="ADD_NEW_CATEGORY_FAILURE",I="UPDATE_CATEGORIES_REQUEST",A="UPDATE_CATEGORIES_SUCCESS",U="UPDATE_CATEGORIES_FAILURE",D="DELETE_CATEGORIES_REQUEST",P="DELETE_CATEGORIES_SUCCESS",L="DELETE_CATEGORIES_FAILURE",G="GET_ALL_PRODUCTS_REQUEST",F="GET_ALL_PRODUCTS_SUCCESS",Q="GET_ALL_PRODUCTS_FAILURE",z="DELETE_PRODUCT_BY_ID_REQUEST",B="DELETE_PRODUCT_BY_ID_SUCCESS",M="DELETE_PRODUCT_BY_ID_FAILURE",Y="ADD_PRODUCT_REQUEST",q="ADD_PRODUCT_REQUEST",H="ADD_PRODUCT_FAILURE",J="CREATE_PAGE_REQUEST",W="CREATE_PAGE_SUCCESS",K="CREATE_PAGE_FAILURE",V="GET_CUSTOMER_ORDER_REQUEST",X="GET_CUSTOMER_ORDER_SUCCESS",Z="GET_CUSTOMER_ORDER_FAILURE",$="UPDATE_CUSTOMER_ORDER_REQUEST",ee="UPDATE_CUSTOMER_ORDER_SUCCESS",te="UPDATE_CUSTOMER_ORDER_FAILURE",ae=a(65),ne=a.n(ae),re="".concat("http://localhost:2000","/api"),ce=a(29),le=a(66),oe={token:null,user:{firstName:"",lastName:"",email:"",picture:""},authenticate:!1,authenticating:!1,loading:!1,error:null,message:""},ue={error:null,message:"",loading:!1},se={products:[]},ie=a(24),me=a(31),pe={categories:[],loading:!1,error:null},de=function e(t,a,n){var r=[];if(void 0===t)return[].concat(Object(me.a)(a),[{_id:n._id,name:n.name,slug:n.slug,type:n.type,children:[]}]);var c,l=Object(ie.a)(a);try{for(l.s();!(c=l.n()).done;){var o=c.value;if(o._id===t){var u={_id:n._id,name:n.name,slug:n.slug,parentId:n.parentId,type:n.type,children:[]};r.push(Object(f.a)(Object(f.a)({},o),{},{children:o.children.length>0?[].concat(Object(me.a)(o.children),[u]):[u]}))}else r.push(Object(f.a)(Object(f.a)({},o),{},{children:o.children?e(t,o.children,n):[]}))}}catch(s){l.e(s)}finally{l.f()}return r},Ee={orders:[]},fe={error:null,loading:!1,page:{}},be=Object(ce.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case g:e=Object(f.a)(Object(f.a)({},e),{},{authenticating:!0});break;case y:e=Object(f.a)(Object(f.a)({},e),{},{user:t.payload.user,token:t.payload.token,authenticate:!0,authenticating:!1});break;case h:e=Object(f.a)(Object(f.a)({},e),{},{loading:!0});break;case O:e=Object(f.a)({},oe);break;case j:e=Object(f.a)(Object(f.a)({},e),{},{error:t.payload.error,loading:!1});break;default:e=Object(f.a)({},oe)}return e},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:e=Object(f.a)(Object(f.a)({},e),{},{loading:!0});break;case C:e=Object(f.a)(Object(f.a)({},e),{},{loading:!1,message:t.payload.message});break;case k:e=Object(f.a)(Object(f.a)({},e),{},{loading:!1,error:t.payload.error});break;default:e=Object(f.a)({},ue)}return e},category:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:e=Object(f.a)(Object(f.a)({},e),{},{categories:t.payload.categories});break;case R:e=Object(f.a)(Object(f.a)({},e),{},{loading:!0});break;case x:var a=t.payload.category,n=de(a.parentId,e.categories,a);console.log("updated categoires",n),e=Object(f.a)(Object(f.a)({},e),{},{categories:n,loading:!1});break;case w:e=Object(f.a)(Object(f.a)({},pe),{},{loading:!1,error:t.payload.error});break;case I:e=Object(f.a)(Object(f.a)({},e),{},{loading:!0});break;case A:e=Object(f.a)(Object(f.a)({},e),{},{loading:!1});break;case U:e=Object(f.a)(Object(f.a)({},e),{},{error:t.payload.error,loading:!1});break;case D:e=Object(f.a)(Object(f.a)({},e),{},{loading:!0});break;case P:e=Object(f.a)(Object(f.a)({},e),{},{loading:!1});break;case L:e=Object(f.a)(Object(f.a)({},e),{},{loading:!1,error:t.payload.error});break;default:e=Object(f.a)({},pe)}return e},product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:e=Object(f.a)(Object(f.a)({},e),{},{products:t.payload.products});break;default:e=Object(f.a)({},se)}return e},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:e=Object(f.a)(Object(f.a)({},e),{},{orders:t.payload.orders});break;default:e=Object(f.a)({},Ee)}return e},page:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:e=Object(f.a)(Object(f.a)({},e),{},{loading:!0});break;case W:e=Object(f.a)(Object(f.a)({},e),{},{loading:!1});break;case K:e=Object(f.a)(Object(f.a)({},e),{},{loading:!1,error:t.payload.error});break;default:e=Object(f.a)({},fe)}return e}}),ge=a(67),ve=Object(ce.createStore)(be,Object(le.composeWithDevTools)(Object(ce.applyMiddleware)(ge.a))),ye=window.localStorage.getItem("token"),he=ne.a.create({baseURL:re,headers:{Authorization:ye?"Bearer ".concat(ye):""}});he.interceptors.request.use((function(e){var t=ve.getState().auth;return t.token&&(e.headers.Authorization="Bearer ".concat(t.token)),e})),he.interceptors.response.use((function(e){return e}),(function(e){console.log(e.response);var t=e.response?e.response.status:500;return t&&500===t&&(localStorage.clear(),ve.dispatch({type:O})),Promise.reject(e)}));var Oe=he,je=function(){return function(){var e=Object(b.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:_}),e.next=3,Oe.get("category/getcategory");case 3:a=e.sent,console.log(a),200===a.status?(n=a.data.categoryList,t({type:T,payload:{categories:n}})):t({type:N,payload:{error:a.data.error}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Se=function(){return function(){var e=Object(b.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:G}),e.next=4,Oe.post("product/getProducts");case 4:200===(a=e.sent).status?(n=a.data.products,t({type:F,payload:{products:n}})):t({type:Q}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},Ce=function(e){var t=Object(p.c)((function(e){return e.auth})),a=Object(p.b)(),n=function(){a(function(){var e=Object(b.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:h}),e.next=3,Oe.post("/admin/signout");case 3:200===(a=e.sent).status?(localStorage.clear(),t({type:O})):t({type:j,payload:{error:a.data.error}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};return r.a.createElement(s.a,{collapseOnSelect:!0,fixed:"top",expand:"lg",bg:"dark",variant:"dark",style:{zIndex:1}},r.a.createElement(i.a,{fluid:!0},r.a.createElement(m.b,{to:"/",className:"navbar-brand"},"Admin Dashboard"),r.a.createElement(s.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(s.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(u.a,{className:"mr-auto"}),t.authenticate?r.a.createElement(u.a,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement("span",{className:"nav-link",onClick:n},"Signout"))):r.a.createElement(u.a,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.c,{to:"signin",className:"nav-link"},"Signin")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.c,{to:"signup",className:"nav-link"},"Signup"))))))},ke=a(118),_e=a(70),Te=(a(108),function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce,null),e.sidebar?r.a.createElement(i.a,{fluid:!0},r.a.createElement(ke.a,null,r.a.createElement(_e.a,{md:2,className:"sidebar"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(m.c,{exact:!0,to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(m.c,{to:"/page"},"Page")),r.a.createElement("li",null,r.a.createElement(m.c,{to:"/category"},"Category")),r.a.createElement("li",null,r.a.createElement(m.c,{to:"/products"},"Products")),r.a.createElement("li",null,r.a.createElement(m.c,{to:"/orders"},"Orders")))),r.a.createElement(_e.a,{md:10,style:{marginLeft:"auto",paddingTop:"60px"}},e.children))):e.children)}),Ne=(a(109),function(e){return r.a.createElement(Te,{sidebar:!0})}),Re=a(7),xe=a(122),we=a(119),Ie=function(e){var t=null;switch(e.type){case"select":t=r.a.createElement(xe.a.Group,null,e.label&&r.a.createElement(xe.a.Label,null,e.label),r.a.createElement("select",{className:"form-control form-control-sm",value:e.value,onChange:e.onChange},r.a.createElement("option",{value:""},e.placeholder),e.options.length>0?e.options.map((function(e,t){return r.a.createElement("option",{key:t,value:e.value},e.name)})):null));break;case"text":default:t=r.a.createElement(xe.a.Group,null,e.label&&r.a.createElement(xe.a.Label,null,e.label),r.a.createElement(xe.a.Control,Object.assign({type:e.type,placeholder:e.placeholder,value:e.value,onChange:e.onChange},e)),r.a.createElement(xe.a.Text,{className:"text-muted"},e.errorMessage))}return t},Ae=function(e){var t=Object(n.useState)(""),a=Object(Re.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)(""),s=Object(Re.a)(u,2),m=s[0],d=s[1],h=Object(p.c)((function(e){return e.auth})),O=Object(p.b)();return h.authenticate?r.a.createElement(o.a,{to:"/"}):r.a.createElement(Te,null,r.a.createElement(i.a,null,r.a.createElement(ke.a,{style:{marginTop:"50px"}},r.a.createElement(_e.a,{md:{span:6,offset:3}},r.a.createElement(xe.a,{onSubmit:function(e){e.preventDefault(),O(function(e){return console.log(e),function(){var t=Object(b.a)(E.a.mark((function t(a){var n,r,c,l;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:g}),t.next=3,Oe.post("/admin/signin",Object(f.a)({},e));case 3:200===(n=t.sent).status?(r=n.data,c=r.token,l=r.user,localStorage.setItem("token",c),localStorage.setItem("user",JSON.stringify(l)),a({type:y,payload:{token:c,user:l}})):400===n.status&&a({type:v,payload:{error:n.data.error}});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({email:c,password:m}))}},r.a.createElement(Ie,{label:"Email",placeholder:"Email",value:c,type:"email",onChange:function(e){return l(e.target.value)}}),r.a.createElement(Ie,{label:"Password",placeholder:"Password",value:m,type:"password",onChange:function(e){return d(e.target.value)}}),r.a.createElement(we.a,{variant:"primary",type:"submit"},"Submit"))))))},Ue=function(e){var t=Object(n.useState)(""),a=Object(Re.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)(""),s=Object(Re.a)(u,2),m=s[0],d=s[1],g=Object(n.useState)(""),v=Object(Re.a)(g,2),y=v[0],h=v[1],O=Object(n.useState)(""),j=Object(Re.a)(O,2),_=j[0],T=j[1],N=Object(p.c)((function(e){return e.auth})),R=Object(p.c)((function(e){return e.user})),x=Object(p.b)();Object(n.useEffect)((function(){R.loading||(l(""),d(""),h(""),T(""))}),[R.loading]);return N.authenticate?r.a.createElement(o.a,{to:"/"}):R.loading?r.a.createElement("p",null,"Loading...!"):r.a.createElement(Te,null,r.a.createElement(i.a,null,R.message,r.a.createElement(ke.a,{style:{marginTop:"50px"}},r.a.createElement(_e.a,{md:{span:6,offset:3}},r.a.createElement(xe.a,{onSubmit:function(e){e.preventDefault(),x(function(e){return console.log(e),function(){var t=Object(b.a)(E.a.mark((function t(a){var n,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:S}),t.next=3,Oe.post("/admin/signup",Object(f.a)({},e));case 3:201===(n=t.sent).status?(r=n.data.message,a({type:C,payload:{message:r}})):400===n.status&&a({type:k,payload:{error:n.data.error}});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({firstName:c,lastName:m,email:y,password:_}))}},r.a.createElement(ke.a,null,r.a.createElement(_e.a,{md:6},r.a.createElement(Ie,{label:"First Name",placeholder:"First Name",value:c,type:"text",onChange:function(e){return l(e.target.value)}})),r.a.createElement(_e.a,{md:6},r.a.createElement(Ie,{label:"Last Name",placeholder:"Last Name",value:m,type:"text",onChange:function(e){return d(e.target.value)}}))),r.a.createElement(Ie,{label:"Email",placeholder:"Email",value:y,type:"email",onChange:function(e){return h(e.target.value)}}),r.a.createElement(Ie,{label:"Password",placeholder:"Password",value:_,type:"password",onChange:function(e){return T(e.target.value)}}),r.a.createElement(we.a,{variant:"primary",type:"submit"},"Submit"))))))},De=a(76),Pe=function(e){var t=e.component,a=Object(De.a)(e,["component"]);return r.a.createElement(o.b,Object.assign({},a,{component:function(e){return window.localStorage.getItem("token")?r.a.createElement(t,e):r.a.createElement(o.a,{to:"/signin"})}}))},Le=a(120),Ge=a(121),Fe=function(e){return r.a.createElement(Ge.a,{size:e.size,show:e.show,onHide:e.handleClose},r.a.createElement(Ge.a.Header,{closeButton:!0},r.a.createElement(Ge.a.Title,null,e.modalTitle)),r.a.createElement(Ge.a.Body,null,e.children),r.a.createElement(Ge.a.Footer,null,e.buttons?e.buttons.map((function(e,t){return r.a.createElement(we.a,{key:t,variant:e.color,onClick:e.onClick},e.label)})):r.a.createElement(we.a,Object.assign({variant:"primary"},e,{style:{backgroundColor:"#333"},className:"btn-sm",onClick:e.onSubmit}),"Save")))},Qe=(a(110),function(e){var t=Object(n.useState)(""),a=Object(Re.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),u=Object(Re.a)(o,2),s=u[0],m=u[1],d=Object(n.useState)(""),f=Object(Re.a)(d,2),g=f[0],v=f[1],y=Object(n.useState)(""),h=Object(Re.a)(y,2),O=h[0],j=h[1],S=Object(n.useState)(""),C=Object(Re.a)(S,2),k=C[0],_=C[1],T=Object(n.useState)(""),N=Object(Re.a)(T,2),R=N[0],x=N[1],w=Object(n.useState)([]),I=Object(Re.a)(w,2),A=I[0],U=I[1],D=Object(n.useState)(!1),P=Object(Re.a)(D,2),L=P[0],G=P[1],F=Object(n.useState)(!1),Q=Object(Re.a)(F,2),J=Q[0],W=Q[1],K=Object(n.useState)(null),V=Object(Re.a)(K,2),X=V[0],Z=V[1],$=Object(p.c)((function(e){return e.category})),ee=Object(p.c)((function(e){return e.product})),te=Object(p.b)(),ae=function(){G(!1)},ne=function(){var e=new FormData;e.append("name",c),e.append("author",s),e.append("quantity",g),e.append("price",O),e.append("description",k),e.append("category",R);var t,a=Object(ie.a)(A);try{for(a.s();!(t=a.n()).done;){var n=t.value;e.append("productPicture",n)}}catch(r){a.e(r)}finally{a.f()}te(function(e){return function(){var t=Object(b.a)(E.a.mark((function t(a){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Y}),t.next=4,Oe.post("product/create",e);case 4:201===t.sent.status?(a({type:q}),a(Se())):a({type:H}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(e)).then((function(){G(!1),l(""),m(""),_(""),j(""),v(""),U([])}))},re=function(e){U([].concat(Object(me.a)(A),[e.target.files[0]]))},ce=function(){W(!1)},le=function(e){Z(e),W(!0)};return r.a.createElement(Te,{sidebar:!0},r.a.createElement(i.a,null,r.a.createElement(ke.a,null,r.a.createElement(_e.a,{md:12},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("h3",null,"Products"),r.a.createElement("button",{onClick:function(){return G(!0)}},"Add")))),r.a.createElement(ke.a,null,r.a.createElement(_e.a,null,r.a.createElement(Le.a,{style:{fontSize:12},responsive:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Category"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,ee.products.length>0?ee.products.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,"2"),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.price),r.a.createElement("td",null,e.quantity),r.a.createElement("td",null,e.category.name),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return le(e)}},"info"),r.a.createElement("button",{onClick:function(){var t={productId:e._id};te(function(e){return function(){var t=Object(b.a)(E.a.mark((function t(a){var n,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Oe.delete("product/deleteProductById",{data:{payload:e}});case 3:n=t.sent,a({type:z}),202===n.status?(a({type:B}),a(Se())):(r=n.data.error,a({type:M,payload:{error:r}})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(t))}},"del")))})):null))))),r.a.createElement(Fe,{show:L,handleClose:ae,modalTitle:"Add New Product",onSubmit:ne},r.a.createElement(Ie,{label:"Name",value:c,placeholder:"Product Name",onChange:function(e){return l(e.target.value)}}),r.a.createElement(Ie,{label:"Author",value:s,placeholder:"Book Author Name",onChange:function(e){return m(e.target.value)}}),r.a.createElement(Ie,{label:"Quantity",value:g,placeholder:"Quantity",onChange:function(e){return v(e.target.value)}}),r.a.createElement(Ie,{label:"Price",value:O,placeholder:"Price",onChange:function(e){return j(e.target.value)}}),r.a.createElement(Ie,{label:"Description",value:k,placeholder:"Description",onChange:function(e){return _(e.target.value)}}),r.a.createElement("select",{className:"form-control",value:R,onChange:function(e){return x(e.target.value)}},r.a.createElement("option",null,"select category"),function e(t){var a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Object(ie.a)(t);try{for(r.s();!(a=r.n()).done;){var c=a.value;n.push({value:c._id,name:c.name}),c.children.length>0&&e(c.children,n)}}catch(l){r.e(l)}finally{r.f()}return n}($.categories).map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.name)}))),A.length>0?A.map((function(e,t){return r.a.createElement("div",{key:t},e.name)})):null,r.a.createElement("input",{type:"file",name:"productPicture",onChange:re})),X?r.a.createElement(Fe,{show:J,handleClose:ce,modalTitle:"Product Details",size:"lg"},r.a.createElement(ke.a,null,r.a.createElement(_e.a,{md:"6"},r.a.createElement("label",{className:"key"},"Name"),r.a.createElement("p",{className:"value"},X.name)),r.a.createElement(_e.a,{md:"6"},r.a.createElement("label",{className:"key"},"Price"),r.a.createElement("p",{className:"value"},X.price))),r.a.createElement(ke.a,null,r.a.createElement(_e.a,{md:"6"},r.a.createElement("label",{className:"key"},"Quantity"),r.a.createElement("p",{className:"value"},X.quantity)),r.a.createElement(_e.a,{md:"6"},r.a.createElement("label",{className:"key"},"Category"),r.a.createElement("p",{className:"value"},X.category.name))),r.a.createElement(ke.a,null,r.a.createElement(_e.a,{md:"12"},r.a.createElement("label",{className:"key"},"Description"),r.a.createElement("p",{className:"value"},X.description))),r.a.createElement(ke.a,null,r.a.createElement(_e.a,null,r.a.createElement("label",{className:"key"},"Product Pictures"),r.a.createElement("div",{style:{display:"flex"}},X.productPictures.map((function(e){return r.a.createElement("div",{className:"productImgContainer",key:e.name},r.a.createElement("img",{src:e.img,alt:""}))})))))):null)}),ze=(a(111),function(e){return r.a.createElement("div",Object.assign({className:"card"},e),(e.headerLeft||e.headerRight)&&r.a.createElement("div",{className:"cardHeader"},e.headerLeft&&r.a.createElement("div",null,e.headerLeft),e.headerRight&&e.headerRight),e.children)}),Be=(a(112),function(e){var t=Object(p.c)((function(e){return e.order})),a=Object(n.useState)(""),c=Object(Re.a)(a,2),l=c[0],o=c[1],u=Object(p.b)(),s=function(e){u(function(e){return function(){var t=Object(b.a)(E.a.mark((function t(a){var n,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:$}),t.prev=1,t.next=4,Oe.post("/order/update",e);case 4:201===(n=t.sent).status?(a({type:ee}),a(function(){var e=Object(b.a)(E.a.mark((function e(t){var a,n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:V}),e.prev=1,e.next=4,Oe.post("/order/getCustomerOrders");case 4:200===(a=e.sent).status?(n=a.data.orders,t({type:X,payload:{orders:n}})):(r=a.data.error,t({type:Z,payload:{error:r}})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())):(r=n.data.error,a({type:te,payload:{error:r}})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}({orderId:e,type:l}))};return r.a.createElement(Te,{sidebar:!0},t.orders.map((function(e,t){return r.a.createElement(ze,{style:{margin:"10px 0"},key:t,headerLeft:e._id},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"50px 50px",alignItems:"center"}},r.a.createElement("div",null,r.a.createElement("div",{className:"title"},"Items"),e.items.map((function(e,t){return r.a.createElement("div",{className:"value",key:t},e.productId.name)}))),r.a.createElement("div",null,r.a.createElement("span",{className:"title"},"Total Price"),r.a.createElement("br",null),r.a.createElement("span",{className:"value"},e.totalAmount)),r.a.createElement("div",null,r.a.createElement("span",{className:"title"},"Payment Type")," ",r.a.createElement("br",null),r.a.createElement("span",{className:"value"},e.paymentType)),r.a.createElement("div",null,r.a.createElement("span",{className:"title"},"Payment Status")," ",r.a.createElement("br",null),r.a.createElement("span",{className:"value"},e.paymentStatus))),r.a.createElement("div",{style:{boxSizing:"border-box",padding:"100px",display:"flex",alignItems:"center"}},r.a.createElement("div",{className:"orderTrack"},e.orderStatus.map((function(e){return r.a.createElement("div",{className:"orderStatus ".concat(e.isCompleted?"active":"")},r.a.createElement("div",{className:"point ".concat(e.isCompleted?"active":"")}),r.a.createElement("div",{className:"orderInfo"},r.a.createElement("div",{className:"status"},e.type),r.a.createElement("div",{className:"date"},function(e){if(e){var t=new Date(e);return"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate())}return""}(e.date))))}))),r.a.createElement("div",{style:{padding:"0 50px",boxSizing:"border-box"}},r.a.createElement("select",{onChange:function(e){return o(e.target.value)}},r.a.createElement("option",{value:""},"select status"),e.orderStatus.map((function(e){return r.a.createElement(r.a.Fragment,null,e.isCompleted?null:r.a.createElement("option",{key:e.type,value:e.type},e.type))})))),r.a.createElement("div",{style:{padding:"0 50px",boxSizing:"border-box"}},r.a.createElement("button",{onClick:function(){return s(e._id)}},"confirm"))))})))}),Me=a(37),Ye=a(75),qe=a.n(Ye),He=a(28),Je=(a(113),function(e){var t=e.show,a=e.handleClose,n=e.modalTitle,c=e.size,l=e.expandedArray,o=e.checkedArray,u=e.handleCategoryInput,s=e.categoryList,i=e.onSubmit;return console.log({expandedArray:l,checkedArray:o}),r.a.createElement(Fe,{show:t,handleClose:a,onSubmit:i,modalTitle:n,size:c},r.a.createElement(ke.a,null,r.a.createElement(_e.a,null,r.a.createElement("h6",null,"Expanded"))),l.length>0&&l.map((function(e,t){return r.a.createElement(ke.a,{key:t},r.a.createElement(_e.a,null,r.a.createElement(Ie,{value:e.name,placeholder:"Category Name",onChange:function(e){return u("name",e.target.value,t,"expanded")}})),r.a.createElement(_e.a,null,r.a.createElement("select",{className:"form-control",value:e.parentId,onChange:function(e){return u("parentId",e.target.value,t,"expanded")}},r.a.createElement("option",null,"select category"),s.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.name)})))),r.a.createElement(_e.a,null,r.a.createElement("select",{className:"form-control",value:e.type,onChange:function(e){return u("type",e.target.value,t,"expanded")}},r.a.createElement("option",{value:""},"Select Type"),r.a.createElement("option",{value:"store"},"Store"),r.a.createElement("option",{value:"product"},"Product"),r.a.createElement("option",{value:"page"},"Page"))))})),r.a.createElement("h6",null,"Checked Categories"),o.length>0&&o.map((function(e,t){return r.a.createElement(ke.a,{key:t},r.a.createElement(_e.a,null,r.a.createElement(Ie,{value:e.name,placeholder:"Category Name",onChange:function(e){return u("name",e.target.value,t,"checked")}})),r.a.createElement(_e.a,null,r.a.createElement("select",{className:"form-control",value:e.parentId,onChange:function(e){return u("parentId",e.target.value,t,"checked")}},r.a.createElement("option",null,"select category"),s.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.name)})))),r.a.createElement(_e.a,null,r.a.createElement("select",{className:"form-control",value:e.type,onChange:function(e){return u("type",e.target.value,t,"checked")}},r.a.createElement("option",{value:""},"Select Type"),r.a.createElement("option",{value:"store"},"Store"),r.a.createElement("option",{value:"product"},"Product"),r.a.createElement("option",{value:"page"},"Page"))))})))}),We=function(e){var t=e.show,a=e.handleClose,n=e.modalTitle,c=e.categoryName,l=e.setCategoryName,o=e.parentCategoryId,u=e.setParentCategoryId,s=e.categoryList,i=e.onSubmit;return r.a.createElement(Fe,{show:t,handleClose:a,onSubmit:i,modalTitle:n},r.a.createElement(ke.a,null,r.a.createElement(_e.a,null,r.a.createElement(Ie,{value:c,placeholder:"Category Name",onChange:function(e){return l(e.target.value)},className:"form-control-sm"})),r.a.createElement(_e.a,null,r.a.createElement("select",{className:"form-control form-control-sm",value:o,onChange:function(e){return u(e.target.value)}},r.a.createElement("option",null,"select category"),s.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.name)}))))))},Ke=(a(114),function(e){var t=Object(p.c)((function(e){return e.category})),a=Object(n.useState)(""),c=Object(Re.a)(a,2),l=c[0],o=c[1],u=Object(n.useState)(""),s=Object(Re.a)(u,2),m=s[0],d=s[1],g=Object(n.useState)(!1),v=Object(Re.a)(g,2),y=v[0],h=v[1],O=Object(n.useState)([]),j=Object(Re.a)(O,2),S=j[0],C=j[1],k=Object(n.useState)([]),_=Object(Re.a)(k,2),T=_[0],N=_[1],G=Object(n.useState)([]),F=Object(Re.a)(G,2),Q=F[0],z=F[1],B=Object(n.useState)([]),M=Object(Re.a)(B,2),Y=M[0],q=M[1],H=Object(n.useState)(!1),J=Object(Re.a)(H,2),W=J[0],K=J[1],V=Object(n.useState)(!1),X=Object(Re.a)(V,2),Z=X[0],$=X[1],ee=Object(p.b)();Object(n.useEffect)((function(){t.loading||h(!1)}),[t.loading]);var te=function e(t){var a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Object(ie.a)(t);try{for(r.s();!(a=r.n()).done;){var c=a.value;n.push({value:c._id,name:c.name,parentId:c.parentId,type:c.type}),c.children.length>0&&e(c.children,n)}}catch(l){r.e(l)}finally{r.f()}return n},ae=function(){var e=te(t.categories),a=[],n=[];S.length>0&&S.forEach((function(t,n){var r=e.find((function(e,a){return t==e.value}));r&&a.push(r)})),T.length>0&&T.forEach((function(t,a){var r=e.find((function(e,a){return t==e.value}));r&&n.push(r)})),z(a),q(n)},ne=function(){var e,t=Q.map((function(e,t){return{_id:e.value}}));Y.map((function(e,t){return{_id:e.value}})).concat(t);t.length>0&&ee((e=t,function(){var t=Object(b.a)(E.a.mark((function t(a){var n,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:D}),t.next=3,Oe.post("/category/delete",{payload:{ids:e}});case 3:201===(n=t.sent).status?(a(je()),a({type:P})):(r=n.data.error,a({type:L,payload:{error:r}}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())).then((function(e){e&&(ee(je()),$(!1))})),$(!1)},re=te(t.categories);return r.a.createElement(Te,{sidebar:!0},r.a.createElement(i.a,null,r.a.createElement(ke.a,null,r.a.createElement(_e.a,{md:12},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("h3",null,"Category"),r.a.createElement("div",{className:"actionBtnContainer"},r.a.createElement("span",null,"Actions: "),r.a.createElement("button",{onClick:function(){return h(!0)}},r.a.createElement(He.a,null)," ",r.a.createElement("span",null,"Add")),r.a.createElement("button",{onClick:function(){ae(),$(!0)}},r.a.createElement(He.g,null)," ",r.a.createElement("span",null,"Delete")),r.a.createElement("button",{onClick:function(){ae(),K(!0)}},r.a.createElement(He.f,null)," ",r.a.createElement("span",null,"Edit")))))),r.a.createElement(ke.a,null,r.a.createElement(_e.a,{md:12},r.a.createElement(qe.a,{nodes:function e(t){var a,n=[],r=Object(ie.a)(t);try{for(r.s();!(a=r.n()).done;){var c=a.value;n.push({label:c.name,value:c._id,children:c.children.length>0&&e(c.children)})}}catch(l){r.e(l)}finally{r.f()}return n}(t.categories),checked:S,expanded:T,onCheck:function(e){return C(e)},onExpand:function(e){return N(e)},icons:{check:r.a.createElement(He.d,null),uncheck:r.a.createElement(He.e,null),halfCheck:r.a.createElement(He.e,null),expandClose:r.a.createElement(He.c,null),expandOpen:r.a.createElement(He.b,null)}})))),r.a.createElement(We,{show:y,handleClose:function(){return h(!1)},onSubmit:function(){var e=new FormData;if(""===l)return alert("Category name is required"),void h(!1);e.append("name",l),e.append("parentId",m),ee(function(e){return function(){var t=Object(b.a)(E.a.mark((function t(a){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:R}),t.prev=1,t.next=4,Oe.post("/category/create",e);case 4:201===(n=t.sent).status?a({type:x,payload:{category:n.data.category}}):a({type:w,payload:n.data.error}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0.response);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}(e)),o(""),d(""),h(!1)},modalTitle:"Add New Category",categoryName:l,setCategoryName:o,parentCategoryId:m,setParentCategoryId:d,categoryList:re}),r.a.createElement(Je,{show:W,handleClose:function(){return K(!1)},onSubmit:function(){var e=new FormData;Y.forEach((function(t,a){e.append("_id",t.value),e.append("name",t.name),e.append("parentId",t.parentId?t.parentId:""),e.append("type",t.type)})),Q.forEach((function(t,a){e.append("_id",t.value),e.append("name",t.name),e.append("parentId",t.parentId?t.parentId:""),e.append("type",t.type)})),ee(function(e){return function(){var t=Object(b.a)(E.a.mark((function t(a){var n,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:I}),t.next=3,Oe.post("/category/update",e);case 3:201===(n=t.sent).status?(a({type:A}),a(je())):(r=n.data.error,a({type:U,payload:{error:r}}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))},modalTitle:"Update Categories",size:"lg",expandedArray:Y,checkedArray:Q,handleCategoryInput:function(e,t,a,n){if(console.log(t),"checked"===n){var r=Q.map((function(n,r){return a===r?Object(f.a)(Object(f.a)({},n),{},Object(Me.a)({},e,t)):n}));z(r)}else if("expanded"===n){var c=Y.map((function(n,r){return a===r?Object(f.a)(Object(f.a)({},n),{},Object(Me.a)({},e,t)):n}));q(c)}},categoryList:re}),r.a.createElement(Fe,{modalTitle:"Confirm",show:Z,handleClose:function(){return $(!1)},buttons:[{label:"No",color:"primary",onClick:function(){alert("no")}},{label:"Yes",color:"danger",onClick:ne}]},r.a.createElement("h5",null,"Expanded"),Y.map((function(e,t){return r.a.createElement("span",{key:t},e.name)})),r.a.createElement("h5",null,"Checked"),Q.map((function(e,t){return r.a.createElement("span",{key:t},e.name)}))))}),Ve=function e(t){var a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Object(ie.a)(t);try{for(r.s();!(a=r.n()).done;){var c=a.value;n.push({value:c._id,name:c.name,parentId:c.parentId,type:c.type}),c.children.length>0&&e(c.children,n)}}catch(l){r.e(l)}finally{r.f()}return n},Xe=function(e){var t=Object(n.useState)(!1),a=Object(Re.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),u=Object(Re.a)(o,2),s=u[0],m=u[1],d=Object(p.c)((function(e){return e.category})),f=Object(n.useState)([]),g=Object(Re.a)(f,2),v=g[0],y=g[1],h=Object(n.useState)(""),O=Object(Re.a)(h,2),j=O[0],S=O[1],C=Object(n.useState)(""),k=Object(Re.a)(C,2),_=k[0],T=k[1],N=Object(n.useState)(""),R=Object(Re.a)(N,2),x=R[0],w=R[1],I=Object(n.useState)([]),A=Object(Re.a)(I,2),U=A[0],D=A[1],P=Object(n.useState)([]),L=Object(Re.a)(P,2),G=L[0],F=L[1],Q=Object(p.b)(),z=Object(p.c)((function(e){return e.page}));Object(n.useEffect)((function(){y(Ve(d.categories))}),[d]),Object(n.useEffect)((function(){console.log(z),z.loading||(l(!1),m(""),S(""),T(""),F([]),D([]))}),[z]);var B=function(e){var t=v.find((function(t){return t.value===e.target.value}));S(e.target.value),w(t.type)},M=function(e){console.log(e),D([].concat(Object(me.a)(U),[e.target.files[0]]))},Y=function(e){console.log(e),F([].concat(Object(me.a)(G),[e.target.files[0]]))},q=function(e){if(""===s)return alert("Title is required"),void l(!1);var t=new FormData;t.append("title",s),t.append("description",_),t.append("category",j),t.append("type",x),U.forEach((function(e,a){t.append("banners",e)})),G.forEach((function(e,a){t.append("products",e)})),Q(function(e){return function(){var t=Object(b.a)(E.a.mark((function t(a){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:J}),t.prev=1,t.next=4,Oe.post("/page/create",e);case 4:201===(n=t.sent).status?a({type:W,payload:{page:n.data.page}}):a({type:K,payload:{error:n.data.error}}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}(t))};return r.a.createElement(Te,{sidebar:!0},z.loading?r.a.createElement("p",null,"Creating Page...please wait"):r.a.createElement(r.a.Fragment,null,r.a.createElement(Fe,{show:c,modalTitle:"Create New Page",handleClose:function(){return l(!1)},onSubmit:q},r.a.createElement(i.a,null,r.a.createElement(ke.a,null,r.a.createElement(_e.a,null,r.a.createElement(Ie,{type:"select",value:j,onChange:B,options:v,placeholder:"Select Category"}))),r.a.createElement(ke.a,null,r.a.createElement(_e.a,null,r.a.createElement(Ie,{value:s,onChange:function(e){return m(e.target.value)},placeholder:"Page Title",className:""}))),r.a.createElement(ke.a,null,r.a.createElement(_e.a,null,r.a.createElement(Ie,{value:_,onChange:function(e){return T(e.target.value)},placeholder:"Page Desc",className:""}))),U.length>0?U.map((function(e,t){return r.a.createElement(ke.a,{key:t},r.a.createElement(_e.a,null,e.name))})):null,r.a.createElement(ke.a,null,r.a.createElement(_e.a,null,r.a.createElement(Ie,{className:"form-control",type:"file",name:"banners",onChange:M}))),G.length>0?G.map((function(e,t){return r.a.createElement(ke.a,{key:t},r.a.createElement(_e.a,null,e.name))})):null,r.a.createElement(ke.a,null,r.a.createElement(_e.a,null,r.a.createElement(Ie,{className:"form-control",type:"file",name:"products",onChange:Y}))))),r.a.createElement("button",{onClick:function(){return l(!0)}},"Create Page")))};var Ze=function(){var e=Object(p.b)(),t=Object(p.c)((function(e){return e.auth}));return Object(n.useEffect)((function(){t.authenticate||e(function(){var e=Object(b.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=localStorage.getItem("token"))?(n=JSON.parse(localStorage.getItem("user")),t({type:y,payload:{token:a,user:n}})):t({type:v,payload:{error:"Failed to login"}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.authenticate&&e(function(){var e=Object(b.a)(E.a.mark((function e(t){var a,n,r,c,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.post("/initialData");case 2:200===(a=e.sent).status&&(n=a.data,r=n.categories,c=n.products,l=n.orders,t({type:T,payload:{categories:r}}),t({type:F,payload:{products:c}}),t({type:X,payload:{orders:l}})),console.log(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t.authenticate]),r.a.createElement("div",{className:"App"},r.a.createElement(o.d,null,r.a.createElement(Pe,{path:"/",exact:!0,component:Ne}),r.a.createElement(Pe,{path:"/page",component:Xe}),r.a.createElement(Pe,{path:"/category",component:Ke}),r.a.createElement(Pe,{path:"/products",component:Qe}),r.a.createElement(Pe,{path:"/orders",component:Be}),r.a.createElement(o.b,{path:"/signin",component:Ae}),r.a.createElement(o.b,{path:"/signup",component:Ue})))};window.store=ve,l.a.render(r.a.createElement(p.a,{store:ve},r.a.createElement(m.a,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ze,null)))),document.getElementById("root"))},77:function(e,t,a){e.exports=a(115)},82:function(e,t,a){},83:function(e,t,a){}},[[77,1,2]]]);
//# sourceMappingURL=main.69414df7.chunk.js.map